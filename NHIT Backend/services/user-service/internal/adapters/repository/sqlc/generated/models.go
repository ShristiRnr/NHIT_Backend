// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0

package sqlc

import (
	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

// Catalog of allowed permission keys used by roles
type Permission struct {
	PermissionID       pgtype.UUID `db:"permission_id" json:"permission_id"`
	Name               string      `db:"name" json:"name"`
	Description        string      `db:"description" json:"description"`
	Module             *string     `db:"module" json:"module"`
	Action             *string     `db:"action" json:"action"`
	IsSystemPermission bool        `db:"is_system_permission" json:"is_system_permission"`
}

// Stores dynamic roles (name + permissions) per tenant/organization
type Role struct {
	RoleID       uuid.UUID          `db:"role_id" json:"role_id"`
	TenantID     uuid.UUID          `db:"tenant_id" json:"tenant_id"`
	ParentOrgID  uuid.NullUUID      `db:"parent_org_id" json:"parent_org_id"`
	Name         string             `db:"name" json:"name"`
	Description  string             `db:"description" json:"description"`
	Permissions  []string           `db:"permissions" json:"permissions"`
	IsSystemRole bool               `db:"is_system_role" json:"is_system_role"`
	CreatedBy    string             `db:"created_by" json:"created_by"`
	CreatedAt    pgtype.Timestamptz `db:"created_at" json:"created_at"`
	UpdatedAt    pgtype.Timestamptz `db:"updated_at" json:"updated_at"`
}

type Tenant struct {
	TenantID  pgtype.UUID        `db:"tenant_id" json:"tenant_id"`
	Name      string             `db:"name" json:"name"`
	Email     string             `db:"email" json:"email"`
	Password  string             `db:"password" json:"password"`
	CreatedAt pgtype.Timestamptz `db:"created_at" json:"created_at"`
	UpdatedAt pgtype.Timestamptz `db:"updated_at" json:"updated_at"`
}

// Stores user information
type User struct {
	// Unique identifier for the user
	UserID uuid.UUID `db:"user_id" json:"user_id"`
	// Reference to tenant (multi-tenancy support)
	TenantID uuid.UUID `db:"tenant_id" json:"tenant_id"`
	Name     string    `db:"name" json:"name"`
	// User email (unique)
	Email    string `db:"email" json:"email"`
	Password string `db:"password" json:"password"`
	// Timestamp when email was verified
	EmailVerifiedAt pgtype.Timestamptz `db:"email_verified_at" json:"email_verified_at"`
	LastLoginAt     pgtype.Timestamptz `db:"last_login_at" json:"last_login_at"`
	LastLogoutAt    pgtype.Timestamptz `db:"last_logout_at" json:"last_logout_at"`
	LastLoginIp     *string            `db:"last_login_ip" json:"last_login_ip"`
	UserAgent       *string            `db:"user_agent" json:"user_agent"`
	// Reference to department
	DepartmentID uuid.NullUUID `db:"department_id" json:"department_id"`
	// Reference to designation
	DesignationID uuid.NullUUID      `db:"designation_id" json:"designation_id"`
	CreatedAt     pgtype.Timestamptz `db:"created_at" json:"created_at"`
	UpdatedAt     pgtype.Timestamptz `db:"updated_at" json:"updated_at"`
}

// Tracks user login history
type UserLoginHistory struct {
	HistoryID uuid.UUID          `db:"history_id" json:"history_id"`
	UserID    uuid.NullUUID      `db:"user_id" json:"user_id"`
	IpAddress *string            `db:"ip_address" json:"ip_address"`
	UserAgent *string            `db:"user_agent" json:"user_agent"`
	LoginTime pgtype.Timestamptz `db:"login_time" json:"login_time"`
}

// Many-to-many relationship between users and roles
type UserRole struct {
	UserID uuid.UUID `db:"user_id" json:"user_id"`
	RoleID uuid.UUID `db:"role_id" json:"role_id"`
}
