// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: organizations.sql

package sqlc

import (
	"context"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

const countChildOrganizations = `-- name: CountChildOrganizations :one
SELECT COUNT(*) FROM organizations WHERE parent_org_id = $1
`

func (q *Queries) CountChildOrganizations(ctx context.Context, parentOrgID pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countChildOrganizations, parentOrgID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countOrganizations = `-- name: CountOrganizations :one
SELECT COUNT(*) FROM organizations
`

func (q *Queries) CountOrganizations(ctx context.Context) (int64, error) {
	row := q.db.QueryRow(ctx, countOrganizations)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countOrganizationsByTenant = `-- name: CountOrganizationsByTenant :one
SELECT COUNT(*) FROM organizations WHERE tenant_id = $1
`

func (q *Queries) CountOrganizationsByTenant(ctx context.Context, tenantID uuid.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countOrganizationsByTenant, tenantID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createOrganization = `-- name: CreateOrganization :one
INSERT INTO organizations (
    org_id, tenant_id, parent_org_id, name, code, database_name,
    description, logo,
    super_admin_name, super_admin_email, super_admin_password,
    initial_projects, status
) VALUES (
    $1, $2, $3, $4, $5, $6,
    $7, $8,
    $9, $10, $11,
    $12, $13
)
RETURNING org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at
`

type CreateOrganizationParams struct {
	OrgID              uuid.UUID   `db:"org_id" json:"org_id"`
	TenantID           uuid.UUID   `db:"tenant_id" json:"tenant_id"`
	ParentOrgID        pgtype.UUID `db:"parent_org_id" json:"parent_org_id"`
	Name               string      `db:"name" json:"name"`
	Code               string      `db:"code" json:"code"`
	DatabaseName       string      `db:"database_name" json:"database_name"`
	Description        *string     `db:"description" json:"description"`
	Logo               *string     `db:"logo" json:"logo"`
	SuperAdminName     *string     `db:"super_admin_name" json:"super_admin_name"`
	SuperAdminEmail    *string     `db:"super_admin_email" json:"super_admin_email"`
	SuperAdminPassword *string     `db:"super_admin_password" json:"super_admin_password"`
	InitialProjects    []string    `db:"initial_projects" json:"initial_projects"`
	Status             int16       `db:"status" json:"status"`
}

func (q *Queries) CreateOrganization(ctx context.Context, arg CreateOrganizationParams) (*Organization, error) {
	row := q.db.QueryRow(ctx, createOrganization,
		arg.OrgID,
		arg.TenantID,
		arg.ParentOrgID,
		arg.Name,
		arg.Code,
		arg.DatabaseName,
		arg.Description,
		arg.Logo,
		arg.SuperAdminName,
		arg.SuperAdminEmail,
		arg.SuperAdminPassword,
		arg.InitialProjects,
		arg.Status,
	)
	var i Organization
	err := row.Scan(
		&i.OrgID,
		&i.TenantID,
		&i.ParentOrgID,
		&i.Name,
		&i.Code,
		&i.DatabaseName,
		&i.Description,
		&i.Logo,
		&i.SuperAdminName,
		&i.SuperAdminEmail,
		&i.SuperAdminPassword,
		&i.InitialProjects,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}

const deleteOrganization = `-- name: DeleteOrganization :exec
DELETE FROM organizations WHERE org_id = $1
`

func (q *Queries) DeleteOrganization(ctx context.Context, orgID uuid.UUID) error {
	_, err := q.db.Exec(ctx, deleteOrganization, orgID)
	return err
}

const getOrganizationByCode = `-- name: GetOrganizationByCode :one
SELECT org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at FROM organizations WHERE code = $1
`

func (q *Queries) GetOrganizationByCode(ctx context.Context, code string) (*Organization, error) {
	row := q.db.QueryRow(ctx, getOrganizationByCode, code)
	var i Organization
	err := row.Scan(
		&i.OrgID,
		&i.TenantID,
		&i.ParentOrgID,
		&i.Name,
		&i.Code,
		&i.DatabaseName,
		&i.Description,
		&i.Logo,
		&i.SuperAdminName,
		&i.SuperAdminEmail,
		&i.SuperAdminPassword,
		&i.InitialProjects,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}

const getOrganizationByID = `-- name: GetOrganizationByID :one
SELECT org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at FROM organizations WHERE org_id = $1
`

func (q *Queries) GetOrganizationByID(ctx context.Context, orgID uuid.UUID) (*Organization, error) {
	row := q.db.QueryRow(ctx, getOrganizationByID, orgID)
	var i Organization
	err := row.Scan(
		&i.OrgID,
		&i.TenantID,
		&i.ParentOrgID,
		&i.Name,
		&i.Code,
		&i.DatabaseName,
		&i.Description,
		&i.Logo,
		&i.SuperAdminName,
		&i.SuperAdminEmail,
		&i.SuperAdminPassword,
		&i.InitialProjects,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}

const listChildOrganizations = `-- name: ListChildOrganizations :many
SELECT org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at FROM organizations WHERE parent_org_id = $1 ORDER BY created_at DESC OFFSET $2 LIMIT $3
`

type ListChildOrganizationsParams struct {
	ParentOrgID pgtype.UUID `db:"parent_org_id" json:"parent_org_id"`
	Offset      int32       `db:"offset" json:"offset"`
	Limit       int32       `db:"limit" json:"limit"`
}

func (q *Queries) ListChildOrganizations(ctx context.Context, arg ListChildOrganizationsParams) ([]*Organization, error) {
	rows, err := q.db.Query(ctx, listChildOrganizations, arg.ParentOrgID, arg.Offset, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []*Organization{}
	for rows.Next() {
		var i Organization
		if err := rows.Scan(
			&i.OrgID,
			&i.TenantID,
			&i.ParentOrgID,
			&i.Name,
			&i.Code,
			&i.DatabaseName,
			&i.Description,
			&i.Logo,
			&i.SuperAdminName,
			&i.SuperAdminEmail,
			&i.SuperAdminPassword,
			&i.InitialProjects,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, &i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listOrganizations = `-- name: ListOrganizations :many
SELECT org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at FROM organizations ORDER BY created_at DESC OFFSET $1 LIMIT $2
`

type ListOrganizationsParams struct {
	Offset int32 `db:"offset" json:"offset"`
	Limit  int32 `db:"limit" json:"limit"`
}

func (q *Queries) ListOrganizations(ctx context.Context, arg ListOrganizationsParams) ([]*Organization, error) {
	rows, err := q.db.Query(ctx, listOrganizations, arg.Offset, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []*Organization{}
	for rows.Next() {
		var i Organization
		if err := rows.Scan(
			&i.OrgID,
			&i.TenantID,
			&i.ParentOrgID,
			&i.Name,
			&i.Code,
			&i.DatabaseName,
			&i.Description,
			&i.Logo,
			&i.SuperAdminName,
			&i.SuperAdminEmail,
			&i.SuperAdminPassword,
			&i.InitialProjects,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, &i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listOrganizationsByTenant = `-- name: ListOrganizationsByTenant :many
SELECT org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at FROM organizations WHERE tenant_id = $1 ORDER BY created_at DESC OFFSET $2 LIMIT $3
`

type ListOrganizationsByTenantParams struct {
	TenantID uuid.UUID `db:"tenant_id" json:"tenant_id"`
	Offset   int32     `db:"offset" json:"offset"`
	Limit    int32     `db:"limit" json:"limit"`
}

func (q *Queries) ListOrganizationsByTenant(ctx context.Context, arg ListOrganizationsByTenantParams) ([]*Organization, error) {
	rows, err := q.db.Query(ctx, listOrganizationsByTenant, arg.TenantID, arg.Offset, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []*Organization{}
	for rows.Next() {
		var i Organization
		if err := rows.Scan(
			&i.OrgID,
			&i.TenantID,
			&i.ParentOrgID,
			&i.Name,
			&i.Code,
			&i.DatabaseName,
			&i.Description,
			&i.Logo,
			&i.SuperAdminName,
			&i.SuperAdminEmail,
			&i.SuperAdminPassword,
			&i.InitialProjects,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, &i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateOrganization = `-- name: UpdateOrganization :one
UPDATE organizations SET
    name = $2,
    code = $3,
    description = $4,
    logo = $5,
    status = $6,
    updated_at = NOW()
WHERE org_id = $1
RETURNING org_id, tenant_id, parent_org_id, name, code, database_name, description, logo, super_admin_name, super_admin_email, super_admin_password, initial_projects, status, created_at, updated_at
`

type UpdateOrganizationParams struct {
	OrgID       uuid.UUID `db:"org_id" json:"org_id"`
	Name        string    `db:"name" json:"name"`
	Code        string    `db:"code" json:"code"`
	Description *string   `db:"description" json:"description"`
	Logo        *string   `db:"logo" json:"logo"`
	Status      int16     `db:"status" json:"status"`
}

func (q *Queries) UpdateOrganization(ctx context.Context, arg UpdateOrganizationParams) (*Organization, error) {
	row := q.db.QueryRow(ctx, updateOrganization,
		arg.OrgID,
		arg.Name,
		arg.Code,
		arg.Description,
		arg.Logo,
		arg.Status,
	)
	var i Organization
	err := row.Scan(
		&i.OrgID,
		&i.TenantID,
		&i.ParentOrgID,
		&i.Name,
		&i.Code,
		&i.DatabaseName,
		&i.Description,
		&i.Logo,
		&i.SuperAdminName,
		&i.SuperAdminEmail,
		&i.SuperAdminPassword,
		&i.InitialProjects,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}
